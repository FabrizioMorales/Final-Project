{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
<title>Set New Password</title>
{% endblock title %}

{% block content %}
<!-- Video Background -->
<video id="video-background" autoplay loop muted class="fixed top-0 left-0 w-full h-full object-cover z-[-1] opacity-100">
    <source src="{% static 'images/circuit-board.3840x2160.mp4' %}" type="video/mp4">
    Your browser does not support the video tag.
</video>

<section class="relative z-10 py-16">
    <div class="max-w-md mx-auto bg-gray-900 bg-opacity-80 backdrop-filter backdrop-blur-sm rounded-lg shadow-lg overflow-hidden">
        <div class="p-8 text-white">
            <!-- Heading -->
            <h2 class="text-3xl font-bold text-center mb-6">Set a New Password</h2>

            <!-- Password Reset Form -->
            <form method="POST">
                {% csrf_token %}
                
                <!-- New Password Field -->
                <div class="mb-6 relative">
                    <label for="id_new_password1" class="block text-sm font-medium mb-2">New Password</label>
                    {{ form.new_password1|add_class:"w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" }}
                    <i class="fa fa-eye absolute top-1/2 right-3 transform -translate-y-1/2 cursor-pointer z-10" id="toggle-password1"></i>
                    <p class="text-xs text-gray-400 mt-1">Your password must contain at least 8 characters and cannot be a commonly used password.</p>
                </div>

                <!-- Password Confirmation Field -->
                <div class="mb-6 relative">
                    <label for="id_new_password2" class="block text-sm font-medium mb-2">New Password Confirmation</label>
                    {{ form.new_password2|add_class:"w-full p-3 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400" }}
                    <i class="fa fa-eye absolute top-1/2 right-3 transform -translate-y-1/2 cursor-pointer z-10" id="toggle-password2"></i>
                    <p class="text-xs text-gray-400 mt-1">Enter the same password as before, for verification.</p>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-white font-bold rounded-lg transition duration-300">
                    Set New Password
                </button>
            </form>
        </div>
    </div>
</section>

<!-- JavaScript to Toggle Password Visibility -->
<script>
    document.getElementById('toggle-password1').addEventListener('click', function() {
        let passwordField = document.getElementById('id_new_password1');
        let type = passwordField.type === 'password' ? 'text' : 'password';
        passwordField.type = type;
    });

    document.getElementById('toggle-password2').addEventListener('click', function() {
        let passwordField = document.getElementById('id_new_password2');
        let type = passwordField.type === 'password' ? 'text' : 'password';
        passwordField.type = type;
    });
</script>

{% endblock content %}
